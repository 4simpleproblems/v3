<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>4SP | Vern</title>
  <link
    href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;700&display=swap"
    rel="stylesheet"
  />
  <style>
    :root {
      --dark-bg: #0a0a0a;
      --darker-bg: #070707;
      --light-text: #f0f0f0;
      --accent-color: #f0f0f0;
      --button-height: 19px;
    }
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Roboto Mono', monospace;
      font-weight: bold;
    }
    body {
      margin: 0;
      height: 100vh;
      display: flex;
      flex-direction: column;
      background-color: var(--dark-bg);
      color: var(--light-text);
      overflow: hidden;
    }
    .navbar-container {
      position: relative;
      transition: transform 0.3s ease;
      overflow: visible;
      height: auto;
      z-index: 100;
      flex-shrink: 0;
    }
    .navbar-container.hidden {
      transform: translateY(-100%);
    }
    .navbar {
      background-color: var(--darker-bg);
      color: var(--light-text);
      padding: 0.75rem 1.5rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 2px solid var(--accent-color);
      width: 100%;
    }
    .logo {
      font-size: 1.5rem;
      font-weight: bold;
    }
    .nav-buttons {
      display: flex;
      gap: 1rem;
    }
    .btn {
      padding: 0.5rem 0.5rem;
      border-radius: 50px;
      font-size: 0.9rem;
      cursor: pointer;
      transition: all 0.2s ease;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }
    .btn.secondary {
      background-color: transparent;
      color: var(--light-text);
      border: 2px solid var(--light-text);
    }
    .btn.secondary:hover {
      background-color: rgba(255, 255, 255, 0.1);
    }
    .toggle-btn {
      position: absolute;
      right: 0px;
      bottom: 0;
      width: 32px;
      height: var(--button-height);
      background-color: var(--darker-bg);
      border: 2px solid var(--accent-color);
      border-top: none;
      border-radius: 0 0 16px 16px;
      cursor: pointer;
      z-index: 101;
      transform: translateY(var(--button-height));
      transition: transform 0.2s ease;
    }
    .toggle-btn:hover {
      transform: translateY(calc(var(--button-height) - 1px));
    }
    .toggle-btn::after {
      content: '';
      position: absolute;
      top: 4px;
      left: 50%;
      transform: translateX(-50%);
      border-left: 6px solid transparent;
      border-right: 6px solid transparent;
      border-bottom: 7px solid var(--accent-color);
      transition: transform 0.3s ease;
    }
    .toggle-btn.collapsed::after {
      border-bottom: none;
      border-top: 6px solid var(--accent-color);
      top: 6px;
      transform: translateX(-50%) rotate(180deg);
    }
    .content-container { /* Renamed for clarity, original CSS also works */
      flex: 1;
      width: 100%;
      position: relative; /* Needed for absolute positioning if you add content inside */
      transition: margin-top 0.3s ease;
      overflow: auto; /* Add scrollbars if content is too large */
    }
    /* Note: Styles targeting iframe inside container are removed/not applicable */

    .status-message {
      display: none;
      padding: 0.3rem 0.8rem;
      border-radius: 20px;
      font-size: 0.8rem;
      background-color: rgba(0, 0, 0, 0.6);
      text-align: center;
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 200;
      color: var(--light-text);
      pointer-events: none;
    }
    .status-message.shown {
      display: block;
      animation: fadeInOut 2s ease forwards;
    }
    @keyframes fadeInOut {
      0% { opacity: 0; }
      20% { opacity: 1; }
      80% { opacity: 1; }
      100% { opacity: 0; }
    }
    .error-message {
        color: red;
        padding: 20px;
        text-align: center;
    }
  </style>
</head>
<body>
  <div class="navbar-container" id="navbarContainer">
    <nav class="navbar">
      <div class="logo">4SP</div>
      <div class="nav-buttons">
        <a href="proxy-list.html" class="btn secondary">Back to Proxies</a>
        <a href="dashboard.html" class="btn secondary">Dashboard</a>
      </div>
    </nav>
    <button class="toggle-btn" id="toggleNavbar" aria-label="Toggle Navigation"></button>
  </div>

  <div class="status-message" id="statusMessage"></div>

  <div class="content-container" id="contentContainer">
      <div class="error-message">Attempting to load content...</div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const toggleButton = document.getElementById('toggleNavbar');
      const navbarContainer = document.getElementById('navbarContainer');
      const statusMessage = document.getElementById('statusMessage');
      const contentContainer = document.getElementById('contentContainer'); // Updated ID

      let navbarVisible = true;
      const externalUrl = 'https://vern-alf.pages.dev/'; // URL to load

      function showStatus(message) {
        statusMessage.textContent = message;
        statusMessage.classList.add('shown');
        setTimeout(() => {
          statusMessage.classList.remove('shown');
        }, 2000);
      }

      function adjustContentMargin() {
        const h = navbarContainer.offsetHeight;
        contentContainer.style.marginTop = navbarVisible ? '0' : `-${h}px`;
      }

      function toggleNavbarVisibility() {
        navbarVisible = !navbarVisible;
        if (navbarVisible) {
          navbarContainer.classList.remove('hidden');
          toggleButton.classList.remove('collapsed');
          showStatus('Navigation bar visible');
        } else {
          navbarContainer.classList.add('hidden');
          toggleButton.classList.add('collapsed');
          showStatus('Navigation bar hidden');
        }
        adjustContentMargin();
      }

      // Function to load external content
      async function loadExternalContent() {
          try {
              // **IMPORTANT:** This fetch request is subject to CORS (Cross-Origin Resource Sharing)
              // It will likely be blocked by the browser unless vern.global.ssl.fastly.net
              // explicitly allows requests from your origin.
              showStatus('Fetching content...');
              const response = await fetch(externalUrl);

              if (!response.ok) {
                  // Handle HTTP errors (like 404, 500, etc.)
                  // Cross-origin fetch might not even reach this point on failure,
                  // the promise might reject instead.
                  throw new Error(`HTTP error! Status: ${response.status}`);
              }

              const htmlContent = await response.text();

              // Inject the fetched HTML into the container
              contentContainer.innerHTML = htmlContent; // Be cautious with innerHTML and untrusted sources

              showStatus('Content loaded successfully (subject to CORS limitations)');

              // Note: Scripts within the fetched HTML might not execute correctly
              // or interact as expected when injected this way. Styles might also conflict.

          } catch (error) {
              console.error('Failed to load external content:', error);
              contentContainer.innerHTML = `
                  <div class="error-message">
                      Failed to load content from ${externalUrl}.<br>
                      This is likely due to browser security restrictions (CORS).<br>
                      Directly fetching content from another website using client-side JavaScript is usually not allowed.
                  </div>
              `;
              showStatus('Failed to load content (CORS issue likely)');
          }
      }


      // Basic toggles & shortcutsâ€¦
      toggleButton.addEventListener('click', toggleNavbarVisibility);

      // Adjusted shortcut handling - removed iframe focus/message shortcuts
      document.addEventListener('keydown', e => {
        const k = e.key.toLowerCase();
        if (e.ctrlKey && e.shiftKey) {
          if (k === 'x') window.location = 'dashboard.html';
          if (k === 'n') { toggleNavbarVisibility(); e.preventDefault(); }
          // Removed iframe-specific shortcuts (i, m)
        }
        // Removed Enter key check related to iframe focus
        // Removed Escape key check related to iframe blur
      });

      // Removed iframe-specific event listeners (focus, blur, message from iframe)

      // Attempt to load content on page load
      loadExternalContent();

      // initial layout fix
      setTimeout(adjustContentMargin, 50);
    });
  </script>
</body>
</html>
