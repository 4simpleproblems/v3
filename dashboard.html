<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>4SP | Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;700&display=swap" rel="stylesheet"/>

  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
  <script src="firebase-config.js"></script>

  <style>
   /* Base styles */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}
body {
  font-family: 'Roboto Mono', monospace;
  background-color: #f5f5f5;
  color: #333;
  line-height: 1.6;
  display: flex;
  flex-direction: column;
  min-height: 100vh;
}
.container {
  width: 100%;
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
  flex: 1;
}

/* Navbar */
.navbar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px;
  background-color: #111;
  color: #fff;
}
.logo {
  font-size: 24px;
  font-weight: 700;
}
.nav-buttons {
  display: flex;
  gap: 10px;
  align-items: center;
}

/* Buttons */
.btn {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 8px 16px;
  min-height: 40px;               /* Ensure consistent height */
  border-radius: 30px;
  text-decoration: none;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.3s ease;
  border: none;
  font-family: 'Roboto Mono', monospace;
  text-align: center;
  background-color: transparent;
  color: #fff;
  border: 1px solid currentColor;
  line-height: 1.2;
}
.btn.primary {
  background-color: #4285F4;
  color: #fff;
}
.btn.secondary {
  background-color: transparent;
  color: #fff;
}
.btn.primary:hover {
  background-color: #3367d6;
}
.btn.secondary:hover {
  background-color: rgba(255,255,255,0.1);
}

/* Logout button inherits .btn styles—no extra overrides needed */
#logoutBtn {
  /* Inherits padding, min-height, display flex, etc. */
}

/* Hidden helper */
.hidden {
  display: none !important;
}

/* Dashboard Content Card – full width */
.dashboard-content-card {
  width: 100%;
  max-width: none;
  margin: 40px 0;
  background-color: #fff;
  border-radius: 50px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  overflow: hidden;
  padding: 40px 30px;
}

/* Section headers – thicker bottom border */
.section-header {
  margin: 3rem 0 1.5rem;
  padding-bottom: 0.5rem;
  border-bottom: 4px solid;
  color: #333;
  font-weight: 700;
  font-size: 1.5rem;
}
.section-header:first-of-type {
  margin-top: 1rem;
}
.media-entertainment-header { border-color: #4285f4; }
.web-access-header            { border-color: #fd7e14; }
.user-interaction-header      { border-color: #dc3545; }
.user-settings-header         { border-color: #6f42c1; }
.others-header                { border-color: #20c997; }
.admin-controls-header        { border-color: #FFD000; }
.sub-admin-controls-header    { border-color: #FF9500; }

/* Grid – tiles expand to fill the row */
.dashboard-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 2rem;
  margin: 2rem 0;
}
.dashboard-grid:has(:nth-child(2):last-child) {
  grid-template-columns: repeat(2, 1fr);
}
@media (min-width: 992px) {
  .dashboard-grid:has(:first-child:last-child) {
    grid-template-columns: 1fr;
  }
  .dashboard-grid:has(:nth-child(2):last-child) {
    grid-template-columns: repeat(2, 1fr);
  }
}
@media (max-width: 991px) and (min-width: 768px) {
  .dashboard-grid:has(:first-child:last-child) {
    grid-template-columns: 1fr;
  }
  .dashboard-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}
@media (max-width: 767px) {
  .dashboard-grid {
    grid-template-columns: 1fr;
  }
}

/* Tiles – slightly taller, thicker borders */
.dashboard-tile {
  position: relative;
  display: flex;
  flex-direction: column;
  justify-content: center;
  background: white;
  border-radius: 30px;
  padding: 2.5rem;
  text-decoration: none;
  color: #333;
  overflow: hidden;
  height: 200px;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  border: 2px solid #e0e0e0;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  width: 100%;
}
.dashboard-tile .tile-content {
  position: relative;
  z-index: 2;
}
.dashboard-tile h3 {
  font-size: 1.6rem;
  margin-bottom: 1rem;
  font-weight: 600;
}
.dashboard-tile p {
  font-size: 1rem;
  line-height: 1.6;
}

/* Inner frame – increased to 4px */
.dashboard-tile .tile-frame {
  position: absolute;
  inset: 0;
  border: 4px solid rgba(0, 0, 0, 0.08);
  border-radius: 28px;
  z-index: 1;
  transition: border-color 0.3s ease;
}
.dashboard-tile:hover {
  transform: translateY(-5px) scale(1.03);
  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
}
.dashboard-tile:hover .tile-frame {
  border-color: #333;
}

.games-tile {
  background-color: white;
  border-color: #e0e0e0;
}

/* Footer */
footer {
  text-align: center;
  padding: 20px;
  color: #666;
  font-size: 14px;
}
  </style>
</head>
<body>
  <nav class="navbar">
    <div class="logo">4SP</div>
    <div class="nav-buttons">
      <a href="legal-list.html" class="btn secondary">Legal</a>
      <a href="index.html" class="btn secondary">Home</a>
      <button class="btn secondary" id="logoutBtn">Log Out</button>
    </div>
  </nav>

  <main class="container">
    <div class="dashboard-content-card">
      <h1 class="hidden" id="authNotice">Please login to access your dashboard</h1>

      <h2 class="section-header media-entertainment-header">Media &amp; Entertainment</h2>
      <div class="dashboard-grid">
        <a href="soundboard.html" class="dashboard-tile">
          <div class="tile-content">
            <h3>Soundboard</h3>
            <p>Access all available sound clips and categories. Play, hear, and admire these amazing sounds.</p>
          </div>
          <div class="tile-frame"></div>
        </a>
        <a href="playlist.html" class="dashboard-tile">
          <div class="tile-content">
            <h3>Playlists (Beta)</h3>
            <p>Access and store sounds you like.</p>
          </div>
          <div class="tile-frame"></div>
        </a>
        <a href="localsounds.html" class="dashboard-tile">
          <div class="tile-content">
            <h3>Local Sounds</h3>
            <p>Upload and play your own local MP3 files.</p>
          </div>
          <div class="tile-frame"></div>
        </a>
        <a href="https://4simpleproblems.github.io/game/" target="_blank" rel="noopener" class="dashboard-tile">
          <div class="tile-content">
            <h3>Retro Games</h3>
            <p>Play a variety of retro games from somebody else's curated collection.</p>
          </div>
          <div class="tile-frame"></div>
        </a>
      </div>

      <h2 class="section-header web-access-header">Web Access</h2>
      <div class="dashboard-grid">
        <a href="vern.html" class="dashboard-tile">
          <div class="tile-content">
            <h3>Vern</h3>
            <p>The official proxy for 4SP.</p>
          </div>
          <div class="tile-frame"></div>
        </a>
        <a href="links.html" class="dashboard-tile">
          <div class="tile-content">
            <h3>Links</h3>
            <p>Uploaded links by 4SP, including Eaglercraft, and other crap.</p>
          </div>
          <div class="tile-frame"></div>
        </a>
      </div>

      <h2 class="section-header user-interaction-header">User Interaction</h2>
      <div class="dashboard-grid">
        <a href="requests.html" class="dashboard-tile">
          <div class="tile-content">
            <h3>Request a Sound</h3>
            <p>Submit requests for new sounds to be added to the collection. Sounds may be approved or denied.</p>
          </div>
          <div class="tile-frame"></div>
        </a>
        <a href="collections.html" class="dashboard-tile">
          <div class="tile-content">
            <h3>Sound Request Collection</h3>
            <p>View sound requests organized by category.</p>
          </div>
          <div class="tile-frame"></div>
        </a>
        <a href="feedback.html" class="dashboard-tile">
          <div class="tile-content">
            <h3>Feedback</h3>
            <p>Suggest user feedback, new features, or proxy reports to 4SP for improvement in the website.</p>
          </div>
          <div class="tile-frame"></div>
        </a>
      </div>

      <h2 class="section-header user-settings-header">User Settings</h2>
      <div class="dashboard-grid">
        <a href="settings.html" class="dashboard-tile">
          <div class="tile-content">
            <h3>Settings</h3>
            <p>Manage and view your settings and preferences. Updating your entire profile with usernames is in beta.</p>
          </div>
          <div class="tile-frame"></div>
        </a>
        <a href="legal-list.html" class="dashboard-tile">
          <div class="tile-content">
            <h3>Legal &amp; Policies</h3>
            <p>Legal center for our website, including privacy policy and our terms of service.</p>
          </div>
          <div class="tile-frame"></div>
        </a>
      </div>

      <h2 class="section-header others-header">Others</h2>
      <div class="dashboard-grid">
        <a href="schedule.html" class="dashboard-tile">
          <div class="tile-content">
            <h3>Working Schedule</h3>
            <p>A working schedule from which websites will be updated.</p>
          </div>
          <div class="tile-frame"></div>
        </a>
        <a href="https://optana-web.github.io/" target="_blank" rel="noopener" class="dashboard-tile">
          <div class="tile-content">
            <h3>Optana Website</h3>
            <p>A website I created based around wishlists. I would be able to make wishlists, and edit them so people know what I want. This is currently in alpha.</p>
          </div>
          <div class="tile-frame"></div>
        </a>
      </div>

      <!-- Full Admin Section -->
      <h2 class="section-header admin-controls-header hidden" id="adminSectionHeader">
        Admin Powers (Private)
      </h2>
      <div class="dashboard-grid hidden" id="adminSection">
        <a href="feedback-collections.html" class="dashboard-tile admin-tile">
          <div class="tile-content">
            <h3>Feedback Collection</h3>
            <p>Access user feedback and suggestions.</p>
          </div>
          <div class="tile-frame"></div>
        </a>
        <a href="vernproview.html" class="dashboard-tile admin-tile">
          <div class="tile-content">
            <h3>Vern Pro</h3>
            <p>Access the internet with a private proxy, away from the public.</p>
          </div>
          <div class="tile-frame"></div>
        </a>
      </div>

      <!-- Sub‑Admin Section (Vern Pro Only) -->
      <h2 class="section-header sub-admin-controls-header hidden" id="subAdminSectionHeader">
        Sub‑Admin Powers (Vern Pro Only)
      </h2>
      <div class="dashboard-grid hidden" id="subAdminSection">
        <a href="vernproview.html" class="dashboard-tile admin-tile">
          <div class="tile-content">
            <h3>Vern Pro</h3>
            <p>Access the internet with a private proxy, away from the public.</p>
          </div>
          <div class="tile-frame"></div>
        </a>
      </div>
    </div>
  </main>

  <footer><p>© 2025 4SP</p></footer>

  <script>
    // Authentication state management
    function handleAuthState(user) {
      const authNotice      = document.getElementById('authNotice');
      const dashboardCard   = document.querySelector('.dashboard-content-card');
      const logoutBtn       = document.getElementById('logoutBtn');
      const adminHeader     = document.getElementById('adminSectionHeader');
      const adminSection    = document.getElementById('adminSection');
      const subAdminHeader  = document.getElementById('subAdminSectionHeader');
      const subAdminSection = document.getElementById('subAdminSection');

      // Full‑admin emails
      const adminEmails = [
        '4simpleproblems@gmail.com',
        'belkwy30@minerva.sparcc.org'
      ];

      // Sub‑admin emails (vern pro only)
      const subAdminEmails = [
        '4simpleproblems@gmail.com',
        'alleda30@minerva.sparcc.org',
        'bellja27@minerva.sparcc.org',
        'belkwy30@minerva.sparcc.org',
        'moyegl30@minerva.sparcc.org',
      ];

      if (user) {
        authNotice.classList.add('hidden');
        dashboardCard.classList.remove('hidden');
        logoutBtn.classList.remove('hidden');

        // Toggle full admin
        if (adminEmails.includes(user.email)) {
          adminHeader.classList.remove('hidden');
          adminSection.classList.remove('hidden');
        } else {
          adminHeader.classList.add('hidden');
          adminSection.classList.add('hidden');
        }

        // Toggle sub‑admin
        if (subAdminEmails.includes(user.email)) {
          subAdminHeader.classList.remove('hidden');
          subAdminSection.classList.remove('hidden');
        } else {
          subAdminHeader.classList.add('hidden');
          subAdminSection.classList.add('hidden');
        }

      } else {
        // if not logged in, send back to sign‑in
        window.location.href = 'index.html';
      }
    }

    // Initialize Firebase authentication and set up logout
    function initAuth() {
      const auth = firebase.auth();
      document.getElementById('logoutBtn')
        .addEventListener('click', e => {
          e.preventDefault();
          auth.signOut().then(() => {
            window.location.href = 'index.html';
          }).catch(console.error);
        });
      auth.onAuthStateChanged(handleAuthState);
    }

    document.addEventListener('DOMContentLoaded', () => {
      if (firebase && firebase.auth) {
        initAuth();
      } else {
        console.error("Firebase SDK not loaded.");
        const notice = document.getElementById('authNotice');
        notice.textContent = 'Error loading application components. Please try again later.';
        notice.classList.remove('hidden');
        document.querySelector('.dashboard-content-card').classList.add('hidden');
      }
    });
  </script>
</body>
</html>
