<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>4SP | Dashboard</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="firebase-config.js"></script>
    
    <!-- Inline fallback styles -->
    <style>
        :root {
            --dark-bg: #1a1a1a;
            --light-text: #f0f0f0;
        }
        .hidden {
            display: none !important;
        }
        .btn {
            display: inline-block !important;
            padding: 0.8rem 1.8rem !important;
            border-radius: 50px !important;
            font-size: 0.95rem !important;
            cursor: pointer !important;
            transition: all 0.2s ease !important;
            text-align: center !important;
            border: 2px solid transparent !important;
        }
        .btn.primary {
            background-color: var(--dark-bg, #1a1a1a) !important;
            color: var(--light-text, #f0f0f0) !important;
        }
        .btn.secondary {
            background-color: transparent !important;
            color: var(--dark-bg, #1a1a1a) !important;
            border-color: var(--dark-bg, #1a1a1a) !important;
        }
        .dashboard-grid {
            display: grid !important;
            grid-template-columns: repeat(3, 1fr) !important;
            gap: 2rem !important;
            margin: 2rem 0 !important;
        }
        @media (max-width: 768px) {
            .dashboard-grid {
                grid-template-columns: 1fr !important;
            }
        }
    </style>
</head>
<body>
    <!-- Navbar with only logout button -->
    <nav class="navbar">
        <div class="logo">4SP</div>
        <div class="nav-buttons">
            <button class="btn primary" id="logoutBtn">Logout</button>
        </div>
    </nav>

    <!-- Main Content (unchanged) -->
    <main class="container">
        <h1 class="hidden" id="authNotice">Please login to access your dashboard</h1>
        
        <div class="dashboard-grid" id="dashboardGrid">
            <!-- Soundboard Tile -->
            <a href="soundboard.html" class="dashboard-tile">
                <div class="tile-content">
                    <h3>Open Soundboard</h3>
                    <p>Access all available sound clips and categories. Play, organize, and manage your favorite sounds.</p>
                </div>
                <div class="tile-frame"></div>
            </a>

            <!-- Request Sound Tile -->
            <a href="request.html" class="dashboard-tile">
                <div class="tile-content">
                    <h3>Request Sound</h3>
                    <p>Submit requests for new sounds to be added to the collection. Vote on upcoming sound additions.</p>
                </div>
                <div class="tile-frame"></div>
            </a>

            <!-- Account Tile -->
            <a href="account.html" class="dashboard-tile">
                <div class="tile-content">
                    <h3>Account</h3>
                    <p>Manage your account settings, preferences, and saved sounds. Update your profile information.</p>
                </div>
                <div class="tile-frame"></div>
            </a>
        </div>
    </main>

    <footer>
        <p>Â© 2025 4SP</p>
    </footer>

    <script>
        // Auth state management
        function handleAuthState(user) {
            const authNotice = document.getElementById('authNotice');
            const dashboardGrid = document.getElementById('dashboardGrid');

            if (user) {
                // User is authenticated
                authNotice.classList.add('hidden');
                dashboardGrid.classList.remove('hidden');
            } else {
                // User is not authenticated - redirect to index
                window.location.href = 'index.html';
            }
        }

        // Initialize auth
        function initAuth() {
            try {
                const auth = firebase.auth();
                
                auth.onAuthStateChanged(user => {
                    handleAuthState(user);
                    
                    // Setup logout button
                    document.getElementById('logoutBtn').addEventListener('click', () => {
                        auth.signOut().then(() => {
                            window.location.href = 'index.html';
                        }).catch(error => {
                            console.error("Logout error:", error);
                        });
                    });
                });
                
            } catch (error) {
                console.error("Auth initialization error:", error);
                window.location.href = 'index.html';
            }
        }

        // Start auth when ready
        if (typeof firebase !== 'undefined') {
            document.addEventListener('DOMContentLoaded', initAuth);
        } else {
            window.location.href = 'index.html';
        }
    </script>
</body>
</html>
