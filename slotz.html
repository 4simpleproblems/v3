<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Slotz</title>
  <link
    href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;700&display=swap"
    rel="stylesheet"
  />
  <style>
    :root {
      --dark-bg: #0a0a0a;
      --darker-bg: #070707;
      --light-text: #f0f0f0;
      --accent-color: #f0f0f0;
      --primary: var(--light-text);
    }
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Roboto Mono', monospace;
      font-weight: 500;
      color: var(--light-text);
    }
    body {
      margin: 0;
      background-color: var(--dark-bg);
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      overflow-x: hidden;
    }

    /* Navbar */
    .navbar-container {
      width: 100%;
      flex-shrink: 0;
    }
    .navbar {
      background-color: var(--darker-bg);
      padding: 0.75rem 1.5rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 2px solid var(--accent-color);
    }
    .logo {
      font-size: 1.5rem;
    }
    .nav-buttons {
      display: flex;
      gap: 1rem;
    }
    .btn {
      padding: 0.5rem 1rem;
      border-radius: 50px;
      font-size: 0.9rem;
      text-decoration: none;
      background: transparent;
      border: 2px solid var(--accent-color);
      cursor: pointer;
      transition: background 0.2s;
    }
    .btn:hover {
      background: rgba(255,255,255,0.1);
    }

    /* Slot Machine */
    h1 {
      margin-top: 2rem;
      margin-bottom: 1rem;
      font-size: 2rem;
      letter-spacing: 2px;
      animation: glow 2s infinite;
    }
    #controls {
      display: flex;
      gap: 1rem;
      margin-bottom: 1.5rem;
      align-items: center;
    }
    #controls div {
      font-size: 1rem;
    }
    input[type=number], button {
      background: transparent;
      border: 2px solid var(--accent-color);
      padding: 0.4rem 0.8rem;
      font-family: inherit;
      font-size: 1rem;
      border-radius: 8px;
      color: var(--light-text);
    }
    button {
      position: relative;
      overflow: hidden;
    }
    button:after {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle at center, rgba(255,255,255,0.2), transparent 70%);
      transform: rotate(45deg) translate(-100%, -100%);
      opacity: 0;
      transition: opacity 0.3s, transform 0.5s;
    }
    button:active:after {
      opacity: 1;
      transform: rotate(45deg) translate(0, 0);
      transition: none;
    }

    #slot-machine {
      display: flex;
      gap: 1rem;
      margin-bottom: 1rem;
    }
    .reel {
      width: 80px;
      height: 80px;
      border: 3px solid var(--accent-color);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      overflow: hidden;
      animation: blink 1.5s infinite;
    }
    .reel .number {
      position: absolute;
      font-size: 2.5rem;
    }
    .reel.spinning .number {
      animation: slide 0.4s linear infinite;
      filter: blur(4px);
    }

    #message {
      font-size: 1.1rem;
      height: 1.5rem;
      margin-bottom: 2rem;
      opacity: 0;
      transition: opacity 0.5s;
    }
    #message.win {
      animation: glow 1s infinite;
      opacity: 1;
    }
    #message.win.x2 { color: #0f0; }
    #message.win.x3 { color: #ff0; }
    #message.lose {
      color: #f00;
      opacity: 1;
    }

    /* Confetti */
    .confetti {
      position: fixed;
      width: 6px;
      height: 6px;
      background: var(--accent-color);
      top: 0;
      opacity: 0.8;
      pointer-events: none;
      animation: fall 2s ease-out forwards;
    }

    @keyframes slide {
      0%   { transform: translateY(100%); }
      100% { transform: translateY(-100%); }
    }
    @keyframes blink {
      0%,100% { border-color: var(--accent-color); }
      50%     { border-color: #777; }
    }
    @keyframes glow {
      0%,100% { text-shadow: 0 0 5px var(--accent-color); }
      50%     { text-shadow: 0 0 20px var(--accent-color); }
    }
    @keyframes fall {
      to {
        transform: translate(var(--dx), 100vh) rotate(var(--rot));
        opacity: 0;
      }
    }
  </style>
</head>
<body>

  <div class="navbar-container">
    <nav class="navbar">
      <div class="logo">Slotz</div>
      <div class="nav-buttons">
        <a href="dashboard.html" class="btn">Dashboard</a>
        <button class="btn" id="logoutBtn">Logout</button>
      </div>
    </nav>
  </div>

  <h1>Slotz</h1>

  <div id="controls">
    <div>Balance:Â <span id="balance">1000</span></div>
    <div>Bet:Â <input type="number" id="bet" min="1" value="10"></div>
    <button id="spin">SPIN</button>
  </div>

  <div id="slot-machine">
    <div class="reel"><div class="number">0</div></div>
    <div class="reel"><div class="number">0</div></div>
    <div class="reel"><div class="number">0</div></div>
  </div>

  <div id="message"></div>

  <script>
    // Simple logout â†’ redirect to login
    document.getElementById('logoutBtn').addEventListener('click', () => {
      window.location.href = 'login.html';
    });

    const reels = document.querySelectorAll('.reel .number');
    const spinBtn = document.getElementById('spin');
    const balEl = document.getElementById('balance');
    const betEl = document.getElementById('bet');
    const msgEl = document.getElementById('message');
    let balance = 1000;

    function updateBalance() { balEl.textContent = balance; }

    // generous odds
    function calculateResults(bet) {
      const p3 = Math.min(0.05 + bet/500*0.05, 0.20);
      const p2 = Math.min(0.20 + bet/500*0.10, 0.60);
      const r = Math.random();
      if (r < p3) {
        const n = Math.ceil(Math.random()*7);
        return [n,n,n];
      } else if (r < p3 + p2) {
        const n = Math.ceil(Math.random()*7);
        let m; do { m = Math.ceil(Math.random()*7); } while (m === n);
        const pos = Math.floor(Math.random()*3);
        const arr = [n,n,n]; arr[pos] = m;
        return arr;
      } else {
        const set = [];
        while (set.length < 3) {
          const x = Math.ceil(Math.random()*7);
          if (!set.includes(x)) set.push(x);
        }
        return set;
      }
    }

    function burstConfetti() {
      for (let i=0; i<40; i++) {
        const c = document.createElement('div');
        c.className = 'confetti';
        c.style.left = (Math.random()*100)+'vw';
        c.style.setProperty('--dx', ((Math.random()*2-1)*100)+'vw');
        c.style.setProperty('--rot', (Math.random()*360)+'deg');
        document.body.appendChild(c);
        setTimeout(()=> c.remove(), 2000);
      }
    }

    function spinReel(el, dur, final) {
      const parent = el.parentElement;
      parent.classList.add('spinning');
      return new Promise(res =>{
        setTimeout(()=>{
          parent.classList.remove('spinning');
          el.textContent = final;
          res(final);
        }, dur);
      });
    }

    spinBtn.addEventListener('click', async () => {
      const bet = +betEl.value;
      if (!bet || bet > balance) return alert('Invalid bet!');
      balance -= bet; updateBalance();
      msgEl.textContent = ''; msgEl.className = '';

      const finals = calculateResults(bet);
      const times = [1200,1400,1600].map(t => t + Math.random()*300);
      const outs = await Promise.all(finals.map((n,i) =>
        spinReel(reels[i], times[i], n)
      ));

      const cnt = {};
      outs.forEach(n=>cnt[n]=(cnt[n]||0)+1);
      let payout=0, cls='';
      if (Object.values(cnt).includes(3)) {
        payout = bet*3; cls='x3';
        msgEl.textContent = 'ðŸŽ‰ JACKPOT! 3Ã— WIN!';
      } else if (Object.values(cnt).includes(2)) {
        payout = bet*2; cls='x2';
        msgEl.textContent = 'âœ¨ Nice! 2Ã— WIN!';
      } else {
        payout = 0;
        msgEl.textContent = 'ðŸ˜¢ You lose';
        msgEl.className = 'lose';
      }

      if (payout>0) {
        msgEl.className = `win ${cls}`;
        burstConfetti();
      }
      balance += payout; updateBalance();
    });

    updateBalance();
  </script>
</body>
</html>