<!-- playlist-show.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>4SP | View Playlist</title>
    <link rel="stylesheet" href="styles.css"><link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="firebase-config.js"></script>
    <style>
        /* reuse dashboard/grid/button styles */
        .navbar, .dashboard-tile, .btn {/* ... */}
    </style>
</head>
<body>
    <nav class="navbar"><div class="logo">4SP</div><div class="nav-buttons"><a href="playlists.html" class="btn secondary">Back</a><a href="#" class="btn primary hidden" id="editBtn">Edit</a></div></nav>
    <main class="container">
        <h1 id="plName"></h1>
        <p id="plDesc"></p>
        <div id="soundsList" class="dashboard-grid"></div>
    </main>
    <footer><p>Â© 2025 4SP</p></footer>
    <script>
        let current={};
        function initShow(){
            const auth=firebase.auth(); auth.onAuthStateChanged(user=>{ if(!user) return window.location.href='index.html'; loadPlaylist(user); });
        }
        function loadPlaylist(user){
            const params=new URLSearchParams(location.search);
            if(params.has('localId')){
                const locals=JSON.parse(localStorage.getItem('localPlaylists')||'[]'); current=locals.find(p=>p.id===params.get('localId'))||{}; renderPlaylist();
            } else {
                const id=params.get('id');
                firebase.firestore().collection('users').doc(user.uid).collection('playlists').doc(id).get().then(doc=>{current=doc.data(); renderPlaylist();});
            }
        }
        function renderPlaylist(){
            document.getElementById('plName').textContent=current.name;
            document.getElementById('plDesc').textContent=current.description;
            const list=document.getElementById('soundsList'); list.innerHTML='';
            current.sounds.forEach(s=>{const btn=document.createElement('button');btn.className='dashboard-tile';btn.textContent=s.name;btn.onclick=_=>new Audio(s.folder?`${s.folder}/${s.fileName}`:s.blobUrl).play();list.appendChild(btn);});
        }
        document.addEventListener('DOMContentLoaded',initShow);
    </script>
</body>
</html>
